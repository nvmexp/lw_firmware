#if !LIBOS_TINY

#define DISPATCH_INTERRUPT 32
#define DISPATCH(i, v) . = KernelTrapUlwectoredTable + (i) * 4; LONG(v);

KernelTrapUlwectoredTable = . ;

DISPATCH(LW_RISCV_CSR_MCAUSE_EXCODE_IAMA, KernelTrapInstructionMisaligned)
DISPATCH(LW_RISCV_CSR_MCAUSE_EXCODE_IACC_FAULT, KernelTrapInstructionAccess)
DISPATCH(LW_RISCV_CSR_MCAUSE_EXCODE_ILL,  KernelTrapInstructionIllegal)
DISPATCH(LW_RISCV_CSR_MCAUSE_EXCODE_BKPT, KernelTrapInstructionBreakpoint)
DISPATCH(LW_RISCV_CSR_MCAUSE_EXCODE_LAMA, KernelTrapLoadMisaligned)
DISPATCH(LW_RISCV_CSR_MCAUSE_EXCODE_LACC_FAULT, KernelTrapLoadAccess)
DISPATCH(LW_RISCV_CSR_MCAUSE_EXCODE_SAMA, KernelTrapStoreMisaligned)
DISPATCH(LW_RISCV_CSR_MCAUSE_EXCODE_SACC_FAULT, KernelTrapStoreAccess)
DISPATCH(LW_RISCV_CSR_MCAUSE_EXCODE_UCALL, KernelTrapSyscall)
DISPATCH(LW_RISCV_CSR_MCAUSE_EXCODE_IPAGE_FAULT, KernelTrapInstructionFault)
DISPATCH(LW_RISCV_CSR_MCAUSE_EXCODE_LPAGE_FAULT, KernelTrapLoadFault)
DISPATCH(LW_RISCV_CSR_MCAUSE_EXCODE_SPAGE_FAULT, KernelTrapStoreFault)

/* If we could prove that USS and SSS weren't reachable, we could save 64 bytes */
DISPATCH(LW_RISCV_CSR_MCAUSE_EXCODE_SSS, 0)

DISPATCH(DISPATCH_INTERRUPT | LW_RISCV_CSR_MCAUSE_EXCODE_S_TINT, KernelTrapTimer)
DISPATCH(DISPATCH_INTERRUPT | LW_RISCV_CSR_MCAUSE_EXCODE_M_EINT, KernelTrapInterrupt)

#endif